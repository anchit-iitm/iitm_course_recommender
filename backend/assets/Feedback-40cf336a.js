import{_ as T,a9 as S,o as h,c as w,w as l,a as e,k as n,L as d,b as g,M as i,d as p,e as r,g as k,l as c,h as V,V as f,f as C,P as v,aa as D,j,N as A,O as B,ab as b,ac as x}from"./index-9925a73e.js";import{_ as L}from"./user-6a039ff6.js";import{V as y}from"./VRow-fd607537.js";import{V as m}from"./VCol-1084c33d.js";import{V as O}from"./VDialog-a5dd7237.js";import{V as E}from"./VTextField-25b902d9.js";import{V as F}from"./VTextarea-8dd56c7c.js";import{V as I}from"./VSelect-e75dd184.js";import{V as U}from"./VContainer-cade46d0.js";import"./dialog-transition-6afa3e57.js";const N={data(){return{id:"",course:{level:"Hehe"},editDialog:!1,levelOptions:["foundation","diploma","degree"],dpOrDsOptions:["dp","ds"],feedbacks:[]}},watch:{dialog(a){a||this.close()},$route:{handler(a,t){this.id=a.params.courseId,this.$root.vtoast.show({message:`Feedbacks for ${this.id} opened`,color:"info"}),this.getCourseInfo()}}},methods:{getAllFeedbacks:async function(){let a=sessionStorage.getItem("token");await fetch(`/api/v1/course/${this.id}/feedback`,{method:"GET",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}}).then(t=>t.json().then(u=>({response:t,data:u}))).then(({response:t,data:u})=>{if(!t.ok)throw new Error(`Error ${t.status}: ${u.msg}`);this.feedbacks=u}).catch(t=>{this.$root.vtoast.show({message:t.message,color:"info"})})},getCourseInfo:async function(){let a=sessionStorage.getItem("token");await fetch("/api/v1/courses/"+this.id,{method:"GET",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}}).then(t=>t.json().then(u=>({response:t,data:u}))).then(({response:t,data:u})=>{if(!t.ok)throw new Error(`Error ${t.status}: ${u.msg}`);this.course=u,this.getAllFeedbacks()}).catch(t=>{console.log(t)})},editCourse(a){this.editDialog=!0},async saveChanges(){try{let a=sessionStorage.getItem("token");const t=await fetch(`/api/v1/courses/${this.id}`,{method:"PATCH",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({name:this.course.name,description:this.course.description,level:this.course.level,dp_or_ds:this.course.dp_or_ds,credits:this.course.credits})});if(!t.ok)throw new Error(`Error ${t.status}: ${t.statusText}`);this.$root.vtoast.show({message:"Course information updated"}),this.editDialog=!1}catch(a){this.$root.vtoast.show({message:a.message,color:"error"})}},cancelEdit(){this.editDialog=!1}},mounted:async function(){let a=S();this.id=a.params.courseId,this.getCourseInfo()}},z={class:"float-left"};function P(a,t,u,G,o,_){return h(),w(U,{key:o.id},{default:l(()=>[e(n,{flat:""},{default:l(()=>[e(d,{class:"text-h5"},{default:l(()=>[g("span",z,i(o.course.id)+" - "+i(o.course.name),1),e(p,{color:"primary",class:"float-right",onClick:t[0]||(t[0]=s=>_.editCourse(o.course.id))},{default:l(()=>[r("Edit Course Details")]),_:1})]),_:1}),e(k),e(c,null,{default:l(()=>[e(y,null,{default:l(()=>[e(m,{cols:"12",md:"4"},{default:l(()=>[e(n,null,{default:l(()=>[e(d,null,{default:l(()=>[r("Course Description")]),_:1}),e(c,null,{default:l(()=>[e(V,null,{default:l(()=>[e(f,{class:"text-justify mt-2"},{default:l(()=>[r(i(o.course.description),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(m,{cols:"12",md:"4"},{default:l(()=>[e(n,null,{default:l(()=>[e(d,null,{default:l(()=>[r("Course Information")]),_:1}),e(c,null,{default:l(()=>[e(V,null,{default:l(()=>[e(f,null,{default:l(()=>[e(C,null,{default:l(()=>[r(i(o.course.level[0].toUpperCase()+o.course.level.slice(1)),1)]),_:1}),e(v,null,{default:l(()=>[r("Level")]),_:1})]),_:1}),e(f,null,{default:l(()=>[e(C,null,{default:l(()=>[r(i(o.course.dp_or_ds=="dp"?"Programming Course":"Data Science Course"),1)]),_:1}),e(v,null,{default:l(()=>[r("Course Category")]),_:1})]),_:1}),e(f,null,{default:l(()=>[e(C,null,{default:l(()=>[r(i(o.course.credits),1)]),_:1}),e(v,null,{default:l(()=>[r("Credits")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(m,{cols:"12",md:"4"},{default:l(()=>[e(n,null,{default:l(()=>[e(d,null,{default:l(()=>[r("Average Difficulty")]),_:1}),e(c,{class:"text-center"},{default:l(()=>[e(D,{rotate:360,size:200,width:35,"model-value":o.course.difficulty_rating*10,color:o.course.difficulty_rating>=7?"red":o.course.difficulty_rating>3?"warning":"green"},{default:l(()=>[r(i(o.course.difficulty_rating),1)]),_:1},8,["model-value","color"])]),_:1})]),_:1})]),_:1})]),_:1}),e(y,null,{default:l(()=>[e(m,{cols:"12",md:"12"},{default:l(()=>[e(n,{flat:""},{default:l(()=>[e(d,null,{default:l(()=>[r("Feedbacks ("+i(o.feedbacks.length)+")",1)]),_:1}),e(c,null,{default:l(()=>[(h(!0),j(A,null,B(o.feedbacks,s=>(h(),w(n,{key:s.id,class:"mt-4"},{default:l(()=>[e(y,null,{default:l(()=>[e(m,{cols:"12",md:"10"},{default:l(()=>[e(V,{density:"compact"},{default:l(()=>[e(f,{"prepend-avatar":L,title:s.poster,subtitle:s.time},null,8,["title","subtitle"]),e(k,{width:"40%",class:"ml-5 mt-1"}),e(f,{class:"text-justify"},{default:l(()=>[r(i(s.description),1)]),_:2},1024)]),_:2},1024),e(b,null,{default:l(()=>[e(p,{flat:"",disabled:""},{default:l(()=>[e(x,null,{default:l(()=>[r("mdi-thumb-up-outline")]),_:1}),g("div",null,i(s.likes),1)]),_:2},1024),e(p,{flat:"",disabled:""},{default:l(()=>[e(x,null,{default:l(()=>[r("mdi-thumb-down-outline")]),_:1}),g("div",null,i(s.dislikes),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(m,{cols:"12",md:"2",class:"d-flex align-center justify-center"},{default:l(()=>[e(D,{rotate:360,size:100,width:15,"model-value":s.rating*10,color:s.rating>=7?"red":s.rating>3?"warning":"green"},{default:l(()=>[r(i(s.rating),1)]),_:2},1032,["model-value","color"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(O,{modelValue:o.editDialog,"onUpdate:modelValue":t[6]||(t[6]=s=>o.editDialog=s),"max-width":"600"},{default:l(()=>[e(n,null,{default:l(()=>[e(d,null,{default:l(()=>[r("Edit Course")]),_:1}),e(c,null,{default:l(()=>[e(E,{modelValue:o.course.name,"onUpdate:modelValue":t[1]||(t[1]=s=>o.course.name=s),label:"Name"},null,8,["modelValue"]),e(F,{modelValue:o.course.description,"onUpdate:modelValue":t[2]||(t[2]=s=>o.course.description=s),label:"Description"},null,8,["modelValue"]),e(I,{modelValue:o.course.level,"onUpdate:modelValue":t[3]||(t[3]=s=>o.course.level=s),items:o.levelOptions,label:"Level"},null,8,["modelValue","items"]),e(I,{modelValue:o.course.dp_or_ds,"onUpdate:modelValue":t[4]||(t[4]=s=>o.course.dp_or_ds=s),items:o.dpOrDsOptions,label:"DP or DS"},null,8,["modelValue","items"]),e(E,{modelValue:o.course.credits,"onUpdate:modelValue":t[5]||(t[5]=s=>o.course.credits=s),label:"Credits"},null,8,["modelValue"])]),_:1}),e(b,null,{default:l(()=>[e(p,{color:"primary",onClick:_.saveChanges},{default:l(()=>[r("Save Changes")]),_:1},8,["onClick"]),e(p,{color:"secondary",onClick:_.cancelEdit},{default:l(()=>[r("Cancel")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const Z=T(N,[["render",P]]);export{Z as default};
