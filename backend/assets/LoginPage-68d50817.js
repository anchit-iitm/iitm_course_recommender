import{_ as p,r as c,o as i,c as f,a as o,w as t,V as h,b as a,d as _,e as g,f as V,g as w,h as b}from"./index-5d579034.js";import{V as x,a as y}from"./VToolbar-8d83fe43.js";import{V as S}from"./VForm-1429d45b.js";import{V as l}from"./VTextField-5ae99a31.js";import{V as v}from"./VSheet-ce0c9426.js";const k={name:"LoginForm",data(){return{username:"abc@xyz.com",password:"abcd"}},methods:{login:async function(){await fetch("/api/v1/user/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.username,password:this.password})}).then(s=>s.json().then(e=>({response:s,data:e}))).then(({response:s,data:e})=>{if(s.ok)sessionStorage.setItem("name",e.profile.name),sessionStorage.setItem("email",e.profile.email),sessionStorage.setItem("role",e.profile.role),sessionStorage.setItem("token",e.auth.authToken),this.$root.vtoast.show({message:"Login Successful!"}),e.profile.role=="admin"?this.$router.push({name:"AdminDashboard"}):e.profile.role=="student"?this.$router.push({name:"StudentHome"}):e.profile.role=="ctm"?this.$router.push({name:"CourseTeamDashboard"}):e.profile.role=="im"&&this.$router.push({name:"ManagementDashboard"});else throw new Error(`${e.message}`)}).catch(s=>{this.$root.vtoast.show({message:s.message,color:"error"})})}}},T={class:"d-flex align-center justify-center",style:{height:"90vh"}},$={class:"mt-2"};function C(s,e,m,B,r,u){const d=c("router-link");return i(),f("div",T,[o(v,{width:"400",class:"mx-auto"},{default:t(()=>[o(h,{class:"elevation-12"},{default:t(()=>[o(x,{dark:"",color:"primary"},{default:t(()=>[o(y,null,{default:t(()=>[a("Login form")]),_:1})]),_:1}),o(_,null,{default:t(()=>[o(S,{"fast-fail":"",onSubmit:g(u.login,["prevent"])},{default:t(()=>[o(l,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=n=>r.username=n),name:"username",label:"Username",type:"text",placeholder:"username",required:""},null,8,["modelValue"]),o(l,{modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=n=>r.password=n),name:"password",label:"Password",type:"password",placeholder:"password",required:""},null,8,["modelValue"]),o(V,{block:"",type:"submit",class:"fill-width",color:"primary",value:"log in"},{default:t(()=>[a("Login")]),_:1})]),_:1},8,["onSubmit"]),w("div",$,[a(" Don't have an account? "),o(d,{to:"/register"},{default:t(()=>[a("Sign Up")]),_:1})])]),_:1})]),_:1})]),_:1})])}const L=p(k,[["render",C]]),j={__name:"LoginPage",setup(s){return(e,m)=>(i(),b(L))}};export{j as default};
